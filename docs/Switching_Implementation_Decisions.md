# –†–ï–®–ï–ù–ò–Ø –ü–û –†–ï–ê–õ–ò–ó–ê–¶–ò–ò SWITCHING LEMMA
**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, –Ω–∞—á–∏–Ω–∞–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
**–°–ø—Ä–∏–Ω—Ç:** PR-1 (–æ–¥–∏–Ω–æ—á–Ω—ã–π –ª–∏—Ç–µ—Ä–∞–ª)

---

## –ü–†–ò–ù–Ø–¢–´–ï –†–ï–®–ï–ù–ò–Ø

### ‚úÖ Q1: –ü–æ–¥—Ö–æ–¥ - C. –ì–∏–±—Ä–∏–¥–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:**
- **–°–µ–π—á–∞—Å:** –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è d=2 (DNF/CNF)
- **–ü–æ—Ç–æ–º:** –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —Å–ª–æ–π –¥–ª—è –æ–±—â–µ–≥–æ d
- **–ù–ï –¥–µ–ª–∞–µ–º:** Measure theory –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ë—ã—Å—Ç—Ä–æ —Å–Ω–∏–º–∞–µ—Ç –∞–∫—Å–∏–æ–º—ã –¥–ª—è depth-2
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É PDT/PartialCertificate
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∞–Ω—Ç–∏—á–µ–∫–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –∏–≥—Ä—É—à–µ—á–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–∞—Ö
- –ù–µ –∑–∞–∫–∞–ø—ã–≤–∞–µ–º—Å—è –≤ measure-theory —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏

### ‚úÖ Q2: –†–µ—Å—É—Ä—Å—ã

**–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞:**
- ‚úÖ H√•stad thesis (1986)
- ‚úÖ Jukna "Boolean Function Complexity"
- ‚úÖ Arora-Barak (–≥–ª–∞–≤–∞ 14)
- ‚úÖ Servedio-Tan (2018) –¥–ª—è multi-switching

**Mathlib:**
- ‚úÖ –ù–ï —Ç—Ä–µ–±—É—é—Ç—Å—è: Probability, MeasureTheory (–Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ)
- ‚úÖ –ù—É–∂–Ω—ã: Fin, Finset, —Å–ø–∏—Å–∫–∏, –±–∞–∑–æ–≤—ã–µ –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞
- ‚úÖ –ü–æ–∑–∂–µ: Nat.log2, –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∏–µ –æ—Ü–µ–Ω–∫–∏

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- ‚úÖ Zulip: #mathlib, #lean4, #complexity

### ‚úÖ Q3: ResidualDTDepth - B. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Ö–Ω—è—è –æ—Ü–µ–Ω–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
```lean
def compileResidualToDT (f : BitVec n ‚Üí Bool) (Œ≤ : Subcube n) : PDT n := ...

def ResidualDTDepth (f : BitVec n ‚Üí Bool) (Œ≤ : Subcube n) : Nat :=
  PDT.depth (compileResidualToDT f Œ≤)
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –î–∞–µ—Ç —Ä–∞–±–æ—á–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–∞–∑—É
- –õ–µ–º–º—ã –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç–∏ –ª–µ–≥–∫–æ –¥–æ–∫–∞–∑–∞—Ç—å
- –ü—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è –º–∞–ª—ã—Ö DNF –∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–∑–∂–µ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –¥–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –≥–ª—É–±–∏–Ω—ã —á–µ—Ä–µ–∑ Nat.find

### ‚úÖ Q4: –ú–∞–ª—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã - –î–ê

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞—á–∏–Ω–∞–µ–º —Å n=2,3
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö
- –û—Ç–ª–∞–∂–∏–≤–∞–µ–º –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (selectors, errU, leaves/realize)

### ‚úÖ Q5: –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–¥–∏–Ω–æ—á–Ω—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã - –î–ê

**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ –ø–µ—Ä–≤—ã–π PR (PR-1)
- –ë—ã—Å—Ç—Ä–∞—è –ø–æ–±–µ–¥–∞ (1 –Ω–µ–¥–µ–ª—è)
- –û–±—Ä–∞–∑–µ—Ü —Å—Ç–∏–ª—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤

---

## –ë–≠–ö–õ–û–ì (6 PR)

### PR-1: –ó–∞–≤–µ—Ä—à–∏—Ç—å partial_shrinkage_single_literal ‚≠ê –¢–ï–ö–£–©–ò–ô
**–°—Ä–æ–∫:** 1 –Ω–µ–¥–µ–ª—è
**–§–∞–π–ª:** `ThirdPartyFacts/Depth2_Constructive.lean`

**–ó–∞–¥–∞—á–∏:**
- [x] –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–µ—Ä–µ–≤–æ `PDT.node i (PDT.leaf Œ≤0) (PDT.leaf Œ≤1)`
- [ ] –ó–∞–∫—Ä—ã—Ç—å `selectors_sub`
- [ ] –î–æ–∫–∞–∑–∞—Ç—å `errU = 0`
- [ ] –î–æ–±–∞–≤–∏—Ç—å helper –ª–µ–º–º—ã –¥–ª—è PDT (depth, leaves)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è n=2,3

**Exit criteria:**
- ‚úÖ –¢–µ–æ—Ä–µ–º–∞ –∑–∞–∫—Ä—ã—Ç–∞ (no sorry)
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –¥–ª—è n=2,3
- ‚úÖ –í—Å–µ helper –ª–µ–º–º—ã –∏–º–µ—é—Ç @[simp]

---

### PR-2: –û–¥–∏–Ω–æ—á–Ω—ã–π —Ç–µ—Ä–º (–∫–æ–Ω—ä—é–Ω–∫—Ü–∏—è)
**–°—Ä–æ–∫:** 1 –Ω–µ–¥–µ–ª—è
**–§–∞–π–ª:** `ThirdPartyFacts/Depth2_Constructive.lean`

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –≤–µ—Ç–≤–ª–µ–Ω–∏–µ –ø–æ —Å–ø–∏—Å–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [ ] –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ–¥–∫—É–±–æ–≤ (Subcube.fix)
- [ ] –î–æ–∫–∞–∑–∞—Ç—å Œµ = 0
- [ ] depthBound ‚â§ k (k = —á–∏—Å–ª–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ —Ç–µ—Ä–º–µ)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** PR-1

**Exit criteria:**
- ‚úÖ –õ–µ–º–º–∞ `partial_shrinkage_single_term` –∑–∞–∫—Ä—ã—Ç–∞
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è —Ç–µ—Ä–º–æ–≤ –¥–ª–∏–Ω—ã 1,2,3

---

### PR-3: –û–¥–∏–Ω–æ—á–Ω–∞—è –∫–ª–∞—É–∑–∞ (–¥–∏–∑—ä—é–Ω–∫—Ü–∏—è)
**–°—Ä–æ–∫:** 1 –Ω–µ–¥–µ–ª—è
**–§–∞–π–ª:** `ThirdPartyFacts/Depth2_Constructive.lean`

**–ó–∞–¥–∞—á–∏:**
- [ ] –ó–µ—Ä–∫–∞–ª—å–Ω–æ —Ç–µ—Ä–º—É, —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –Ω–∞ true
- [ ] depthBound ‚â§ k
- [ ] Œµ = 0

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** PR-2

**Exit criteria:**
- ‚úÖ –õ–µ–º–º–∞ `partial_shrinkage_single_clause` –∑–∞–∫—Ä—ã—Ç–∞
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ–º–º –∏–∑ PR-2

---

### PR-4: –ú–∞–ª—ã–µ DNF (M ‚â§ 4)
**–°—Ä–æ–∫:** 2 –Ω–µ–¥–µ–ª–∏
**–§–∞–π–ª:** `ThirdPartyFacts/Depth2_Constructive.lean`

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–∫–ª–µ–π–∫–∞ PartialDT (–≤–≤–µ–¥–µ–Ω–∏–µ –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–æ–≤)
- [ ] –û—Ü–µ–Ω–∫–∞ –≥–ª—É–±–∏–Ω—ã –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
- [ ] –Ø–≤–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä –¥–ª—è M=1,2,3,4
- [ ] Œµ = 0 –¥–ª—è –º–∞–ª—ã—Ö —Ñ–æ—Ä–º—É–ª

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** PR-2, PR-3

**Exit criteria:**
- ‚úÖ –õ–µ–º–º–∞ `partial_shrinkage_small_dnf` –∑–∞–∫—Ä—ã—Ç–∞
- ‚úÖ –ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã PartialDT.bind/glue

---

### PR-5: Depth-2 –æ–±—â–∏–π —Å–ª—É—á–∞–π (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ)
**–°—Ä–æ–∫:** 3-4 –Ω–µ–¥–µ–ª–∏
**–§–∞–π–ª—ã:** `Depth2_Switching_Spec.lean`, `Depth2_Constructive.lean`

**–ó–∞–¥–∞—á–∏:**
- [ ] –ò–Ω–¥—É–∫—Ü–∏—è –ø–æ M (—Ä–∞–∑–º–µ—Ä —Ñ–æ—Ä–º—É–ª—ã)
- [ ] –ö–æ–º–ø–æ–Ω–æ–≤–∫–∞ –¥–µ—Ä–µ–≤—å–µ–≤
- [ ] depthBound ‚â§ (log M)¬≤
- [ ] Œµ ‚â§ 1/(n+2)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** PR-1..4, ResidualDTDepth

**Exit criteria:**
- ‚úÖ –¢–µ–æ—Ä–µ–º–∞ `partial_shrinkage_for_AC0_depth2` –∑–∞–∫—Ä—ã—Ç–∞
- ‚úÖ –°–Ω–∏–º–∞–µ—Ç –∞–∫—Å–∏–æ–º—É –¥–ª—è d=2

---

### PR-6: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ–±—â–µ–º—É d (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è)
**–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏
**–§–∞–π–ª—ã:** `ThirdPartyFacts/Facts_Switching.lean`

**–ó–∞–¥–∞—á–∏:**
- [ ] –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å "—Å–ª—É—á–∞–π–Ω–æ–π —Ä–µ—Å—Ç—Ä–∏–∫—Ü–∏–∏" (–±–µ–∑ measure theory)
- [ ] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã p, "—Å–æ–±—ã—Ç–∏–µ —Ö–æ—Ä–æ—à–∏—Ö —Ä–µ—Å—Ç—Ä–∏–∫—Ü–∏–π"
- [ ] –ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–Ω–∞—è –≤–µ—Ä—Ö–Ω—è—è –æ—Ü–µ–Ω–∫–∞
- [ ] –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–≥–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** Depth-2

**Exit criteria:**
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–æ—Ç–æ–≤ –¥–ª—è –∑–∞–º–µ–Ω—ã –Ω–∞ Mathlib.Probability
- ‚úÖ –ù–µ –º–µ–Ω—è–µ—Ç PartialCertificate

---

## –í–†–ï–ú–ï–ù–ù–ê–Ø –û–¶–ï–ù–ö–ê

| –§–∞–∑–∞ | –°—Ä–æ–∫ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------|------|-----------|
| **PR-1** (–ª–∏—Ç–µ—Ä–∞–ª) | 1 –Ω–µ–¥–µ–ª—è | –û–±—Ä–∞–∑–µ—Ü –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ ‚úÖ |
| **PR-2** (—Ç–µ—Ä–º) | 1 –Ω–µ–¥–µ–ª—è | –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ–¥–∫—É–±–æ–≤ |
| **PR-3** (–∫–ª–∞—É–∑–∞) | 1 –Ω–µ–¥–µ–ª—è | –°–∏–º–º–µ—Ç—Ä–∏—è —Ç–µ—Ä–º/–∫–ª–∞—É–∑–∞ |
| **PR-4** (–º–∞–ª—ã–µ DNF) | 2 –Ω–µ–¥–µ–ª–∏ | –ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã PartialDT |
| **PR-5** (depth-2) | 3-4 –Ω–µ–¥–µ–ª–∏ | –°–Ω—è—Ç–∏–µ –∞–∫—Å–∏–æ–º—ã –¥–ª—è d=2 ‚úÖ |
| **PR-6** (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è) | 2-3 –Ω–µ–¥–µ–ª–∏ | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ–±—â–µ–º—É d |
| **–ò–¢–û–ì–û** | **2-3 –º–µ—Å—è—Ü–∞** | Depth-2 –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ–∑ –∞–∫—Å–∏–æ–º |

**–ó–∞—Ç–µ–º:**
- –û–±–æ–±—â–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π d: 2-3 –º–µ—Å—è—Ü–∞
- –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã –∏ –æ—Ä–∞–∫—É–ª—ã: 1 –º–µ—Å—è—Ü

**–û–ë–©–ï–ï –í–†–ï–ú–Ø:** 5-7 –º–µ—Å—è—Ü–µ–≤ –¥–æ —Å–Ω—è—Ç–∏—è –≤—Å–µ—Ö –∞–∫—Å–∏–æ–º switching

---

## –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ô –ö–û–ù–¢–ï–ö–°–¢

### –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–æ–ø–æ—Ä–∞)

**H√•stad (1987):**
- DNF —Ñ–æ—Ä–º—É–ª–∞ —à–∏—Ä–∏–Ω—ã w
- –°–ª—É—á–∞–π–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º p
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≥–ª—É–±–∏–Ω—ã DT ‚â• t: ‚â§ (C¬∑p¬∑w)^t

**Razborov (1993), Beame (1994):**
- –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –¢–µ –∂–µ –æ—Ü–µ–Ω–∫–∏

**Arora-Barak –≥–ª–∞–≤–∞ 14:**
- –û–±–∑–æ—Ä switching lemma
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ AC‚Å∞

**–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å —Å–∂–∏–º–∞–µ–º–æ—Å—Ç–∏ AC‚Å∞:**
- ‚â§ 1/2 (–≥–ª—É–±–∏–Ω–∞ DT —Ä–∞—Å—Ç–µ—Ç —Å—É–±–ª–∏–Ω–µ–π–Ω–æ)
- –≠—Ç–æ –∏–º–µ–Ω–Ω–æ –æ—Ü–µ–Ω–∫–∞ –¥–ª—è partial_shrinkage_for_AC0

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ù–µ —Ñ–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å—Ä–∞–∑—É**
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ "—Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö–æ—Ä–æ—à–µ–µ œÅ"
   - –û—Ü–µ–Ω–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ ‚Üí epsilon –≤ PartialCertificate

2. **–û–ø–∏—Ä–∞–µ–º—Å—è –Ω–∞ –±—É–º–∞–∂–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞**
   - H√•stad –¥–∞–µ—Ç –≤—Å–µ –Ω—É–∂–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
   - –ú–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ (Razborov/Beame)

3. **–ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**
   - PR-1..5: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ —Å–ª—É—á–∞–∏
   - PR-6: –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —Å–ª–æ–π
   - –ü–æ—Ç–æ–º: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

## –ì–†–ê–ë–õ–ò –ò –ù–Æ–ê–ù–°–´

### 1. selectors –∏ –ª–∏—Å—Ç—å—è
**–ü—Ä–æ–±–ª–µ–º–∞:** selectors f –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–¥–º–∞—Å—Å–∏–≤–æ–º –ª–∏—Å—Ç—å–µ–≤ —Å—Ç–≤–æ–ª–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ó–∞–≤–µ–¥–∏—Ç–µ @[simp] –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏–π –≤ PDT.leaves
- –ò–Ω–∞—á–µ selectors_sub - —Ä—É—á–Ω–∞—è –≤–æ–∑–Ω—è

### 2. errU –Ω—É–ª–µ–≤–∞—è –Ω–∞ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–±–∏–µ–Ω–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–∂–Ω–æ –¥–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª—É—á–∞—è

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–∫–∞–∂–∏—Ç–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é: –µ—Å–ª–∏ selectors f –ø–æ–∫—Ä—ã–≤–∞—é—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –±–µ–∑ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π, —Ç–æ errU = 0
- –≠—Ç–æ –∑–∞–∫—Ä–æ–µ—Ç PR-1..3 –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É

### 3. –°–∫–ª–µ–π–∫–∞ PartialDT
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –¥–µ—Ä–µ–≤—å–µ–≤ —Å–ª–æ–∂–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã PartialDT.bind/glue
- –õ–µ–º–º—ã –ø—Ä–æ –æ—Ü–µ–Ω–∫—É –≥–ª—É–±–∏–Ω—ã –∏ —Ö–≤–æ—Å—Ç–æ–≤ –ø—Ä–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

### 4. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∏–ª—å
**–†–µ—à–µ–Ω–∏–µ:**
- –ú–æ–¥—É–ª—å PDT/Sugar.lean —Å –ª–µ–º–º–∞–º–∏-—Å–∞—Ö–∞—Ä–æ–º
- depth_node_succ, leaves_node, leaf_mem_leaves, realize_leaf

### 5. –õ–æ–≥–∏ –∏ –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞
**–†–µ—à–µ–Ω–∏–µ:**
- –î–ª—è depth-2 –º–æ–∂–Ω–æ –±–µ–∑ —Ç–æ—á–Ω–æ–≥–æ log‚ÇÇ
- –ö –º–æ–º–µ–Ω—Ç—É AC‚Å∞-–æ–±–æ–±—â–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å Nat.log2/Real.log

---

## –ì–û–¢–û–í–´–ï –ó–ê–ì–û–¢–û–í–ö–ò

### –õ–µ–º–º—ã –¥–ª—è PDT
```lean
@[simp] lemma PDT.depth_leaf (Œ≤ : Subcube n) :
  PDT.depth (PDT.leaf Œ≤) = 0 := rfl

lemma PDT.depth_node_le_one (t : PDT n) :
  PDT.depth (PDT.node i (PDT.leaf Œ≤0) (PDT.leaf Œ≤1)) ‚â§ 1 := by
  simpa using Nat.le_of_eq (by simp [PDT.depth])

@[simp] lemma PDT.leaves_node :
  PDT.leaves (PDT.node i L R) = PDT.leaves L ‚à™ PDT.leaves R := by
  ...
```

### –ù—É–ª–µ–≤–∞—è –æ—à–∏–±–∫–∞
```lean
lemma errU_literal_zero (i : Fin n) :
  let f : BitVec n ‚Üí Bool := singleLiteral n i
  errU f [restrictToFalse n i, restrictToTrue n i] = 0 := by
  ...
```

### –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ–¥–∫—É–±–æ–≤
```lean
def Subcube.fix (Œ≤ : Subcube n) (i : Fin n) (b : Bool) : Subcube n := ...
lemma fix_monotone : Œ≤ ‚â§ Œ≤.fix i b := ...
lemma eval_on_fix (x : BitVec n) :
  x ‚àà Œ≤.fix i b ‚Üî (x ‚àà Œ≤ ‚àß x[i] = b) := ...
```

---

## –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ü—Ä—è–º–æ —Å–µ–π—á–∞—Å (PR-1):
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —ç—Ç–æ—Ç summary
2. üîÑ –î–æ–±–∞–≤–∏—Ç—å helper –ª–µ–º–º—ã –¥–ª—è PDT
3. üîÑ –ó–∞–≤–µ—Ä—à–∏—Ç—å partial_shrinkage_single_literal
4. üîÑ –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è n=2,3
5. üîÑ –ö–æ–º–º–∏—Ç –∏ push

### –ü–æ—Å–ª–µ PR-1:
- PR-2: –û–¥–∏–Ω–æ—á–Ω—ã–π —Ç–µ—Ä–º (1 –Ω–µ–¥–µ–ª—è)
- PR-3: –û–¥–∏–Ω–æ—á–Ω–∞—è –∫–ª–∞—É–∑–∞ (1 –Ω–µ–¥–µ–ª—è)
- PR-4: –ú–∞–ª—ã–µ DNF (2 –Ω–µ–¥–µ–ª–∏)

---

**–°–æ–∑–¥–∞–Ω–æ:** 22 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç—ã, –Ω–∞—á–∏–Ω–∞–µ–º PR-1
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è helper –ª–µ–º–º –¥–ª—è PDT
