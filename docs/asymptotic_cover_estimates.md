> **Статус (2025-09-24)**: Формулы синхронизированы с текущими реализациями `Cover2.mBound` и `decisionTree_cover`.

# Переход к асимптотическим оценкам покрытия

Этот документ собирает итоговые выводы о размере покрытия семейства булевых
функций и даёт более удобные **асимптотические** оценки. Мы начинаем с грубой
границы из леммы `buildCover_card_bound` и постепенно приводим её к прозрачным
формам, связывающим число прямоугольников с коллизионной энтропией `h` и
чувствительностью `s`.

## Грубая оценка

Ранее доказано, что при ограничении коллизионной энтропии `H₂(F) ≤ h`
существует множество монохроматических подкубов `\mathcal R`, покрывающее
все единичные точки семейства `F`, и его мощность удовлетворяет

```
|\mathcal R| ≤ n · 3^n · (h+2) · 2^{10h}.
```

Новая арифметическая лемма из `bound.lean` показывает, что эта величина
контролируется кубической степенью размера таблицы истинности:
`|\mathcal R| ≤ 2^{3n + 11h + 2}`.  Таким образом оценка остаётся полиномиальной
по `2^n` и экспоненциальной лишь по `h`, что значительно удобнее для последующих
приложений.

## Полиномиальный случай: малая чувствительность

Если каждая функция семейства имеет чувствительность `s`, то в ход идёт ветвь
`low_sensitivity_cover`. Литературный результат Гопалана с соавт.
(`FOCS/ITCS 2016`) утверждает, что значения любой булевой функции на шаре
Хэмминга радиуса `2s` полностью определяют её поведение. Следовательно,
каждая функция покрывается не более чем `2^{C s \log₂(n+1)}` подкубами, что
эквивалентно оценке `(n+1)^{C s}`. Объединяя покрытия всех `f ∈ F` и
используя лемму слияния низкой чувствительности, мы получаем общее покрытие
семейства размера `2^{10 s \log₂(n+1)}`. Эта величина растёт лишь как
полином `n^{O(s)}` и значительно превосходит грубую границу даже для умеренных
`s`.

## Энтропийный случай: экспонента по `h`

Если семейство не удовлетворяет условию малой чувствительности, `buildCover`
переходит в энтропийную ветвь. Лемма об убывании энтропии обеспечивает
координату, фиксация которой уменьшает `H₂` минимум на единицу. Разделяя `F`
по этому биту и рекурсивно строя покрытия, мы получаем двоичное дерево
высоты не более `h`. Каждое разбиение удваивает число прямоугольников, так что
итоговая мощность покрытия оценивается как `2^h` (с учётом полиномиального
множителя и редких «подсолнечных» шагов, дающих лишь константную прибавку).
Это точно соответствует рекуррентному неравенству `2 · mBound(n,h-1) ≤
mBound(n,h)`, лежащему в коде.

## Итоговая формула

Объединяя оба случая, получаем целевую асимптотику

```
|\mathcal R| ≤ (n+1)^{O(s)} + 2^{O(h)}.
```

При фиксированном `s` покрытие имеет полиномиальный размер, а при малой
энтропии — не превышает `2^{C h}`. Оба варианта укладываются в ранее
полученную субэкспоненциальную границу `2^{o(n)}`. В текущей версии
`decisionTree_cover` именно эти оценки и используются: энтропийная ветвь
подставляет `Cover2.mBound`, а ветвь низкой чувствительности обращается к
полиномиальной оценке `coverBound`.

## Связь с формальными границами

Лемма `cover_exists_mBound` показывает, что как только выполнено чисто
арифметическое неравенство `Fintype.card (Subcube n) ≤ mBound n h`, из
`cover_exists_bound` немедленно следует более сильная верхняя оценка
`Rset.card ≤ mBound n h`.  Аналогичное утверждение `coverFamily_card_le_mBound`
упрощает применение к каноническому покрытию `coverFamily`, а лемма
`entropyCover` теперь прямо выдает покрытие размером ≤ `mBound n h`
при наличии арифметического неравенства
`Fintype.card (Subcube n) ≤ mBound n h`.  Эти результаты формально
связывают изложенные асимптотические выводы с существующим кодом.
