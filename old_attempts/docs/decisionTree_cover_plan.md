# План доказательства `decisionTree_cover`
> **Статус (2025-09-24)**: Теорема `decisionTree_cover` полностью доказана в `old_attempts/OldAttempts/low_sensitivity_cover.lean`.  Этот документ теперь выполняет роль краткого описания структуры доказательства и отмечает направления для дальнейших улучшений.

## 1. Структура доказательства

1. **Базовые конструкции.**  Файлы `BoolFunc.lean`, `Boolcube.lean` и `DecisionTree.lean` предоставляют точки булева куба, подкубы, семейства функций и дерево решений.
2. **Измерение прогресса.**  В `Cover/Measure.lean` определяется функция `measureLex3`, контролирующая рекурсию `buildCover`.  Ветви рекурсии строго уменьшают меру, что обеспечивает завершимость.
3. **Комбинаторные шаги.**  Файл `cover2.lean` реализует три ключевые ветви:
   * низкая чувствительность (`low_sensitivity_cover`),
   * энтропийное ветвление (`exists_coord_entropy_noninc`),
   * «подсолнечная» редукция (`sunflower_step`).
4. **Упаковка покрытия.**  `family_entropy_cover.lean` и структура `CoverResP` из `low_sensitivity_cover.lean` собирают покрытие в виде рекордного типа с доказательствами монохроматичности и ограничением `Cover2.mBound`.
5. **Дерево решений.**  Функция `CoverResP.toDecisionTree_for` превращает покрытие в дерево решений для каждой функции семейства.  Лемма `decisionTree_cover_of_buildCover` связывает рекурсивный алгоритм с требуемым форматом теоремы.
6. **Финальная сборка.**  Главный результат `decisionTree_cover` разбирает три случая чувствительности: пустое семейство, константные функции и общий случай.  В ветви большой чувствительности используется оценка `Cover2.mBound n (n+1)`, в малой — комбинация полиномиальных границ `coverBound` и явного перебора единичных точек.

## 2. Результаты, уже реализованные в коде

* `buildCover_covers`, `buildCover_card_bound` – покрытие и универсальная численная оценка.
* `CoverResP` и `CoverRes` – упаковка покрытий, клеящие операции и преобразование в деревья решений.
* `Cover2.mBound` – явная функция `n (h+2) 2^{10h}` с доказанными свойствами монотонности и субэкспоненциальным ростом (`bound.lean`).
* `decisionTree_cover_mBound` – извлечение покрытия, ограниченного `Cover2.mBound`, при выборе бюджета `h = n`.
* Леммы о чувствительности (`sensitivityAt`, `insensitiveCoordsAt`) и их связь с мерой `measureLex3`.

## 3. Оставшиеся улучшения

* Улучшить оценку для малой чувствительности (`coverBound n s`) – текущая константа безопасна, но далека от оптимальной.
* Реализовать конструктивный поиск `firstUncovered`, если понадобится исполнимая версия алгоритма.
* Оптимизировать вспомогательные вычисления (например, `decisionTreeBudget`), чтобы получить более мягкие константы в оценке.

Документ поддерживается как краткое изложение архитектуры доказательства; подробный исторический дневник перенесён в систему контроля версий и не дублируется здесь.
