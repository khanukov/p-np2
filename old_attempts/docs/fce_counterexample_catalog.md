# Каталог дополнительных контрпримеров к формулировке FCE-леммы

## Цель документа

Контрпример, основанный на полном паритете $p(x) = x_1 \oplus \dots \oplus x_n$, показывает, что требование о "общем" покрытии
монохромными подкубами не выдерживает даже самых базовых семейств функций.  Настоящий каталог расширяет картину и систематизирует
другие классы семейств, для которых заявленная в FCE-лемме оценка $|\mathcal{R}| \le n(h+2)2^{10h}$ заведомо недостижима.  Мы
фиксируем общие механизмы возникновения обструкций, чтобы учесть их при будущей переработке формулировки.

## 1. Функции с полностью изолированными единичными входами

### Формулировка

Пусть $f : \{0,1\}^n \to \{0,1\}$ такова, что для каждого $x$ с $f(x)=1$ и для каждой координаты $j$ выполнено $f(x \oplus e_j) = 0$.
То есть каждая единичная точка изолирована во всех направлениях гиперкуба, а локальная чувствительность по каждому биту равна 1.

### Следствие для покрытий

* Любой подкуб положительной размерности содержит пару соседних точек, отличающихся по некоторой координате $j$.
* Для изолированных единиц значения $f$ на такой паре не могут совпадать, иначе одно из значений было бы 1, а другое 0.
* Значит, единственные подкубы, на которых $f$ константен равен 1, это нулевые подкубы — отдельные точки.

Если 1-слоёв у функции много (например, $2^{n-1}$ у полного паритета), покрытие этих точек потребует экспоненциально много подкубов,
противореча оценке FCE-леммы даже при минимальной коллизионной энтропии $H_2(F)=0$.

### Примеры

1. **Полный паритет и его отрицание.** Обсуждённый ранее пример $F = \{p, \bar p\}$.
2. **Аффинные срезы с полной зависимостью.** Функция вида $f(x) = [a_0 \oplus a \cdot x = 1]$ с ненулевым $a \in \{0,1\}^n$, если вектор $a$ содержит единицу в каждой координате.  Такие функции эквивалентны полному паритету после
   переименования переменных и добавления константы.
3. **Слои, задаваемые линейной формой и фиксированием одного бита.** Например, условие "$x_1 = 1$ и $x_2 \oplus \dots \oplus x_n = 1$".
   Все единичные точки образуют независимое множество в графе гиперкуба, так что опять же возможны только точечные покрытия.

Любая семья, содержащая хотя бы одну функцию из этого класса, сразу нарушает утверждение FCE-леммы: минимальное покрытие
должно быть не меньше числа её единичных входов.

## 2. Семейства с ограниченной монотонностью согласия

### Общий шаблон

Даже если отдельные функции не имеют полностью изолированных единиц, встречается класс семейств, где **совместная** монохромность
проваливается из-за того, что разные функции конфликтуют по каждой координате.  Формально, если существует пара $(f,g)$ такая, что
для любой ненулевой подкуба $R$ найдутся $x, y \in R$ с $f(x) \ne f(y)$ или $g(x) \ne g(y)$, то совместная константность
обрушивается.

### Конкретные конструкции

1. **Комплементарная пара высокочувствительных функций.** Если $f$ обладает изолированными единицами, то пара $\{f, \bar f\}$
   вынуждает любое совместно монохромное множество с $f=1$ и $\bar f=0$ быть точкой.  Для покрытия единиц $f$ это уже даёт
   экспоненциальную нижнюю оценку.
2. **Пара, отличающаяся на каждой ребре.** Пусть $f$ и $g$ таковы, что для любого $x$ и $j$ значения на $x$ и $x \oplus e_j$ различаются
   хотя бы у одной из функций.  Тогда любой подкуб положительной размерности нарушает монохромность хотя бы у одной функции, а
   точечные покрытия остаются единственным вариантом.
3. **Аффинное семейство $\{x \mapsto a \cdot x \oplus b : a \in L\}$**, где $L$ — линейное подпространство, содержащее ненулевой
   вектор с единицами во всех координатах.  Наличие такого вектора означает, что внутри семейства есть полнопаритетная функция,
   и предыдущий случай автоматически применяется.

### Вывод

Заявление FCE-леммы предполагает, что даже при малой энтропии можно выбрать один универсальный набор подкубов для всех функций.
Но уже наличие одной конфликтной пары разрушает эту надежду: покрытие вынужденно ветвится на экспоненциальное число точек.

## 3. Случайные и псевдослучайные семейства

### Вероятностная оценка

Пусть мы выбираем $|F| = 2^h$ функций равновероятно и независимо.  Для фиксированного подкуба размерности $d \ge 1$ вероятность
того, что **каждая** функция из $F$ константна на этом подкубе, равна $2^{-|F| 2^d}$: для константности нужно, чтобы все $2^d$
значений каждой функции совпадали.  Если $d \ge 1$ и $h$ фиксирован, это уже вероятность $2^{-\Theta(2^d)}$.

Количество подкубов размерности $d$ равно ${n \choose d} 2^{n-d}$.  Применяя объединённую оценку, получаем, что при $d \ge c \log n$
и умеренном $h$ величина ${n \choose d} 2^{n-d} 2^{-|F| 2^d}$ стремится к нулю.  Следовательно, с вероятностью $1-o(1)$
у случайного семейства **не существует** общего монохромного подкуба положительной размерности.

### Последствия

* Для случайного семейства размером $2^h$ любая попытка построить единое покрытие должна использовать почти исключительно точки.
* Типичная функция имеет $\approx 2^{n-1}$ единиц; значит, требуемое число элементов покрытия снова экспоненциально.
* Это демонстрирует, что проблема не ограничивается специально сконструированными линейными функциями — она проявляется в
  overwhelming большинстве семейств с малой энтропией.

## 4. Накопленные требования к новой формулировке

Из перечисленных классов видно, что будущая версия FCE-леммы должна явно исключить как минимум следующие ситуации:

1. Функции с полностью изолированными единицами (или нулями), если от покрытия требуется захватывать соответствующее значение.
2. Семейства, содержащие взаимно конфликтующие пары, не допускающие общего подкуба положительной размерности.
3. Типично случайные семейства, для которых общий подкуб встречается лишь с экспоненциально малой вероятностью.

Без явного ослабления условий (разрешение отдельных покрытий, переход к цилиндрам, допущение малых исключений и т.п.)
любая комбинаторная стратегия обречена воспроизводить вышеописанные контрпримеры.  Поэтому их следует рассматривать не как
"патологию", а как базовые тесты для любой новой гипотезы.

## 5. Рекомендации для дальнейшей работы

1. **Переформулировать требования к покрытию.** Отдельные покрытия $\{\mathcal{R}_f\}_{f \in F}$ с общей суммарной длиной описания
   представляются наиболее реалистичным направлением: оно сразу обходится без изолированных единиц.
2. **Исследовать цилиндры и прямоугольники.** Общая монохромность может оказаться выполнимой, если разрешить каждому $f$ фиксировать
   собственные координаты.  Следует проверить, совместимы ли такие объекты с downstream-аргументами.
3. **Зафиксировать "тестовый стенд" контрпримеров.** При любой новой гипотезе мгновенно проверять её на семьях из разделов 1–3,
   чтобы избежать повторения ложных заявлений.

Эти шаги позволят преобразовать обнаруженные проблемы в системные требования, а не в ad-hoc исключения.
