# ConstructiveSwitching.lean - –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–Å–ù ‚úÖ
**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ç–∫–∞:** claude/refine-pdt-lean-011CUMHAdqSxwHgPFHhExauT
**–°—Ç–∞—Ç—É—Å:** 100% –±–µ–∑ sorry/admit

---

## üéâ –î–û–°–¢–ò–ñ–ï–ù–ò–ï: ConstructiveSwitching.lean –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫–∞–∑–∞–Ω!

### –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ | ~275 |
| Sorry/admit | **0** ‚úÖ |
| Axioms | **0** ‚úÖ |
| –¢–µ—Å—Ç—ã | –í—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ |

---

## –ß—Ç–æ –±—ã–ª–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

### 1. –ü—É—Å—Ç–æ–µ —Å–µ–º–µ–π—Å—Ç–≤–æ (F = [])

‚úÖ **theorem partial_shrinkage_empty_family**
- –Ø–≤–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è PartialCertificate —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –ì–ª—É–±–∏–Ω–∞ = 0, –æ—à–∏–±–∫–∞ = 0
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ

‚úÖ **theorem partial_shrinkage_for_AC0_empty**
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ AC0Parameters
- –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≤—Å–µ—Ö –≥—Ä–∞–Ω–∏—Ü –∏ –æ—Ü–µ–Ω–æ–∫
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ

### 2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (F = [const c])

‚úÖ **theorem partial_shrinkage_constant**
- –Ø–≤–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è const true –∏ const false
- –†–∞–∑–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
  - `const false`: –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ []
  - `const true`: –ø–æ–ª–Ω—ã–π –ø–æ–¥–∫—É–± [Œ≤]
- –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ err_le –¥–ª—è –æ–±–æ–∏—Ö —Å–ª—É—á–∞–µ–≤
- **–ù–û–í–û–ï:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `C.epsilon = 0` –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–æ

‚úÖ **theorem partial_shrinkage_for_AC0_constant**
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ AC0Parameters
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `C.epsilon = 0` –¥–ª—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≥—Ä–∞–Ω–∏—Ü
- –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –≤–µ—Ä—Ö–Ω–µ–π –æ—Ü–µ–Ω–∫–∏ epsilon
- **–í—Å–µ 2 sorry –∑–∞–ø–æ–ª–Ω–µ–Ω—ã** ‚úÖ

### 3. –ì–ª–∞–≤–Ω–∞—è —Ç–µ–æ—Ä–µ–º–∞

‚úÖ **theorem constructive_cases_exist**
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å–ª—É—á–∞–∏ –ø—É—Å—Ç–æ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ü–æ–ª–Ω–æ–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ switching lemma –≤—ã—á–∏—Å–ª–∏–º–∞

---

## –ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: 2 sorry –≤ epsilon —Å–≤–æ–π—Å—Ç–≤–∞—Ö

**–ë—ã–ª–æ (lines 215, 219):**
```lean
have heps : C.epsilon = 0 := by
  sorry  -- This is definitionally true from construction, needs unfolding
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –£—Å–∏–ª–∏–ª–∏ `partial_shrinkage_constant` —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `C.epsilon = 0`:
   ```lean
   ‚àÉ (‚Ñì : Nat) (C : PartialCertificate n ‚Ñì F),
     ‚Ñì = 0 ‚àß
     C.depthBound = 0 ‚àß
     C.epsilon = 0 ‚àß  -- –ù–û–í–û–ï –°–í–û–ô–°–¢–í–û
     C.epsilon ‚â§ (1 : Q) / 2
   ```

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –≤ `partial_shrinkage_for_AC0_constant`:
   ```lean
   obtain ‚ü®‚Ñì, C, h‚Ñì, hdepth, hŒµ_eq, hŒµ_bound‚ü© := @partial_shrinkage_constant params.n c
   ¬∑ -- 0 ‚â§ epsilon
     rw [hŒµ_eq]  -- –ò—Å–ø–æ–ª—å–∑—É–µ–º hŒµ_eq : C.epsilon = 0
   ¬∑ -- epsilon ‚â§ 1/(n+2)
     rw [hŒµ_eq]  -- –ò—Å–ø–æ–ª—å–∑—É–µ–º hŒµ_eq : C.epsilon = 0
     apply div_nonneg
     ...
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û–±–∞ sorry –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —á–∏—Å—Ç—ã–µ –∏ –ø—Ä—è–º—ã–µ
- ‚úÖ –ù–∏–∫–∞–∫–æ–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

---

## –ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ** - –±–µ–∑ Classical.choice, –±–µ–∑ axiom, –±–µ–∑ sorry
‚úÖ **–Ø–≤–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** - PDT.leaf, —Å–µ–ª–µ–∫—Ç–æ—Ä—ã, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
‚úÖ **–í—ã—á–∏—Å–ª–∏–º–æ** - –≤—Å–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

–ú–æ–¥—É–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ:
1. Switching lemma **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç** –Ω–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤
2. –ú–æ–∂–Ω–æ **—è–≤–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å** —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–µ–º–µ–π—Å—Ç–≤
3. –ê–∫—Å–∏–æ–º—ã –≤ Facts_Switching.lean –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è **–æ–±—â–µ–≥–æ —Å–ª—É—á–∞—è**

### –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –Ω–∞:
- –û–¥–∏–Ω–æ—á–Ω—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã: F = [x‚ÇÅ], [¬¨x‚ÇÅ]
- –ü—Ä–æ—Å—Ç—ã–µ —Ñ–æ—Ä–º—É–ª—ã: F = [x‚ÇÅ ‚à® x‚ÇÇ]
- –ú–∞–ª—ã–µ —Å–µ–º–µ–π—Å—Ç–≤–∞: |F| ‚â§ 4 –¥–ª—è –º–∞–ª—ã—Ö n

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞

### Build
```bash
$ lake build ThirdPartyFacts.ConstructiveSwitching
‚úî [2873/2873] Built ThirdPartyFacts.ConstructiveSwitching
Build completed successfully.
```

### Tests
```bash
$ lake test
Build completed successfully.
All tests passed ‚úì
```

### Sorry check
```bash
$ grep -rn sorry pnp3/ThirdPartyFacts/ConstructiveSwitching.lean | grep -v "^[^:]*:[^:]*--"
pnp3/ThirdPartyFacts/ConstructiveSwitching.lean:261:‚úÖ –í—Å–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∑–∞–≤–µ—Ä—à–µ–Ω—ã (0 sorry)
```
–¢–æ–ª—å–∫–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ - –∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–∏—Å—Ç! ‚úÖ

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Parts A & B

### Core/ (Part A)
- **9 –º–æ–¥—É–ª–µ–π**: BooleanBasics, PDT, PDTPartial, PDTExtras, SubcubeExtras, Atlas, SAL_Core, ShrinkageWitness, ShrinkageAC0
- **Sorry:** 0 ‚úÖ
- **Axioms:** 1 (–≤–Ω–µ—à–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ ShrinkageAC0)

### Counting/ (Part B)
- **3 –º–æ–¥—É–ª—è**: BinomialBounds, Count_EasyFuncs, Atlas_to_LB_Core
- **Sorry:** 0 ‚úÖ
- **Axioms:** 0 ‚úÖ

### ThirdPartyFacts/ConstructiveSwitching.lean
- **–°—Ç—Ä–æ–∫:** ~275
- **Sorry:** 0 ‚úÖ
- **Axioms:** 0 ‚úÖ
- **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** 100% ‚úÖ

### –ò–¢–û–ì–û Parts A & B + Constructive Switching
- **–í—Å–µ–≥–æ –º–æ–¥—É–ª–µ–π:** 13
- **Sorry:** **0** ‚úÖ
- **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ axioms:** 0 ‚úÖ
- **–í–Ω–µ—à–Ω–∏–µ axioms:** 1 (ShrinkageAC0 - switching –¥–ª—è AC‚Å∞ —Å –æ—Ä–∞–∫—É–ª–∞–º–∏)

---

## –í—ã–≤–æ–¥—ã

‚úÖ **Parts A & B –ü–û–õ–ù–û–°–¢–¨–Æ –∑–∞–≤–µ—Ä—à–µ–Ω—ã**

–í—Å–µ –æ–±–µ—â–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
- 0 sorry –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö Core/, Counting/, –∏ ConstructiveSwitching
- –í—Å–µ –≥–ª–∞–≤–Ω—ã–µ —Ç–µ–æ—Ä–µ–º—ã –¥–æ–∫–∞–∑–∞–Ω—ã
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ switching

**–ú–æ–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ –∫ Parts C –∏ D!**

---

**–°–æ–∑–¥–∞–Ω–æ:** 22 –æ–∫—Ç—è–±—Ä—è 2025
**–ê–≤—Ç–æ—Ä:** Claude Code
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û
